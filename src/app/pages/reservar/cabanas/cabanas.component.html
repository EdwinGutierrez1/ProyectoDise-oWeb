<!-- Contenedor principal del componente de selecciÃ³n de cabaÃ±as -->
<div class="cabanas-container">
    <!-- TÃ­tulo del primer paso del proceso de reserva -->
    <h1 class="titulo">Paso 1: Elige la CabaÃ±a</h1>
    
    <!-- Grid responsive con las 3 opciones de cabaÃ±as disponibles -->
    <div class="cabanas-grid">
        <!-- CabaÃ±a #1 - OpciÃ³n para parejas -->
        <div 
            class="cabana-card" 
            [class.selected]="selectedCabana === 1"
            (click)="abrirModal(1)">
            <div class="image-container">
                <img src="/cabaÃ±apequeÃ±a.jpg" loading="lazy" alt="CabaÃ±a pequeÃ±a" class="cabana-image">
            </div>
            <div class="cabana-info">
                <h3>CabaÃ±a #1</h3>
                <p class="capacity">ğŸ‘¥ Pareja</p>
            </div>
        </div>

        <!-- CabaÃ±a #2 - OpciÃ³n para grupos medianos -->
        <div 
            class="cabana-card" 
            [class.selected]="selectedCabana === 2"
            (click)="abrirModal(2)">
            <div class="image-container">
                <img src="/cabaÃ±amediana.jpg" loading="lazy" alt="CabaÃ±a mediana" class="cabana-image">
            </div>
            <div class="cabana-info">
                <h3>CabaÃ±a #2</h3>
                <p class="capacity">ğŸ‘¥ 3-6 personas</p>
            </div>
        </div>

        <!-- CabaÃ±a #3 - OpciÃ³n para grupos grandes -->
        <div 
            class="cabana-card" 
            [class.selected]="selectedCabana === 3"
            (click)="abrirModal(3)">
            <div class="image-container">
                <img src="/cabaÃ±agrande.jpeg" loading="lazy" alt="CabaÃ±a grande" class="cabana-image">
            </div>
            <div class="cabana-info">
                <h3>CabaÃ±a #3</h3>
                <p class="capacity">ğŸ‘¥ 6-10 personas</p>
            </div>
        </div>
    </div>

    <!-- Panel de configuraciÃ³n que aparece despuÃ©s de seleccionar una cabaÃ±a -->
    <div class="contador-precio-container" *ngIf="selectedCabana">
        <!-- Selector de cantidad de personas con controles + y - -->
        <div class="cuadro-info">
            <div class="cuadro-label">No. de personas</div>
            <div class="contador-box">
                <button 
                class="contador-btn contador-btn-minus" 
                (click)="decrementarPersonas()"
                [disabled]="!canDecrement() || isContadorFijo()">-</button>
                <div class="contador-display">{{ cantidadPersonas }}</div>
                <button 
                class="contador-btn contador-btn-plus" 
                (click)="incrementarPersonas()"
                [disabled]="!canIncrement() || isContadorFijo()">+</button>
            </div>
        </div>
        
        <!-- Muestra el precio calculado segÃºn la cabaÃ±a y cantidad de personas -->
        <div class="cuadro-info">
            <div class="cuadro-label cuadro-label-precio">Valor por noche: </div>
            <div class="precio-box">${{ getPrecio() | number:'1.0-0' }}</div>
        </div>
    </div>

    <!-- InformaciÃ³n adicional sobre la variaciÃ³n de precios -->
    <div class="texto-informativo" *ngIf="selectedCabana">
        <p>El valor por noche puede variar segÃºn la cantidad de personas ingresada</p>
    </div>

    <!-- Modal de galerÃ­a fotogrÃ¡fica para ver detalles de cada cabaÃ±a -->
    <div class="modal-overlay" *ngIf="modalAbierto" (click)="cerrarModal()">
        <div class="modal-content" (click)="$event.stopPropagation()">
            <!-- Cabecera del modal con tÃ­tulo y botÃ³n de cierre -->
            <div class="modal-header">
                <h2>CabaÃ±a #{{ cabanaModalActual }}</h2>
                <button class="modal-close" (click)="cerrarModal()">&times;</button>
            </div>

            <!-- GalerÃ­a interactiva de imÃ¡genes -->
            <div class="galeria-container">
                <!-- Imagen principal con navegaciÃ³n por flechas -->
                <div class="imagen-principal">
                    <img 
                        [src]="getImagenActual()" 
                        [alt]="'CabaÃ±a #' + cabanaModalActual + ' - Imagen ' + (imagenActualIndex + 1)"
                        class="imagen-galeria"
                        loading="lazy">
                    
                    <!-- Controles de navegaciÃ³n entre imÃ¡genes -->
                    <button 
                        class="flecha-navegacion flecha-izquierda"
                        (click)="imagenAnterior()"
                        [disabled]="imagenActualIndex === 0">
                        &#8249;
                    </button>
                    
                    <button 
                        class="flecha-navegacion flecha-derecha"
                        (click)="imagenSiguiente()"
                        [disabled]="imagenActualIndex === getImagenesCabana().length - 1">
                        &#8250;
                    </button>
                </div>

                <!-- Indicadores visuales para navegaciÃ³n directa -->
                <div class="indicadores">
                    <span 
                        *ngFor="let imagen of getImagenesCabana(); let i = index"
                        class="indicador"
                        [class.activo]="i === imagenActualIndex"
                        (click)="irAImagen(i)">
                    </span>
                </div>

                <!-- Contador de posiciÃ³n actual en la galerÃ­a -->
                <div class="info-imagen">
                    <span>{{ imagenActualIndex + 1 }} de {{ getImagenesCabana().length }}</span>
                </div>
            </div>

            <!-- InformaciÃ³n detallada de las caracterÃ­sticas de la cabaÃ±a -->
            <div class="modal-info">
                <div class="caracteristicas-cabana">
                    <div class="caracteristica">
                        <span class="icono">ğŸ›ï¸</span>
                        <span class="texto">{{ getHabitacionesCabana() }} habitaciones</span>
                    </div>
                    <div class="caracteristica">
                        <span class="icono">ğŸš¿</span>
                        <span class="texto">{{ getBanosCabana() }} baÃ±os</span>
                    </div>
                    <!-- Amenidad especial que varÃ­a segÃºn el tipo de cabaÃ±a -->
                    <div class="caracteristica" *ngIf="getAmenidadCabana()">
                        <span class="icono">{{ getAmenidadCabana()?.emoji }}</span>
                        <span class="texto">{{ getAmenidadCabana()?.texto }}</span>
                    </div>
                </div>
            </div>

            <!-- BotÃ³n para confirmar la selecciÃ³n de cabaÃ±a -->
            <div class="modal-footer">
                <button 
                    class="btn-elegir"
                    (click)="elegirCabana()">
                    Elegir
                </button>
            </div>
        </div>
    </div>
</div>